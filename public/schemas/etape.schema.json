{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Schéma générique d'une étape du Prompt Ultime",
  "type": "object",
  "properties": {
    "nom": { "type": "string" },
    "titre_section": { "type": "string" },
    "sous_titre": { "type": "string" },
    "description": { "type": "string" },
    "accroche": { "type": "string" },
    "note_methodologique": { "type": "string" },
    "presentation_symbolique": { "type": "string" },
    "invitation": { "type": "string" },
    "consigne": {
      "type": "object",
      "properties": {
        "logique": { "type": "string" },
        "creatif": { "type": "string" },
        "mixte": { "type": "string" },
        "default": { "type": "string" }
      },
      "additionalProperties": true
    },
    "consigne_principale": { "type": "string" },
    "consigne_generale": { "type": "string" },
    "consignes": {
      "type": "array",
      "items": { "type": "string" }
    },
    "champs": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["champ", "type"],
        "properties": {
          "champ": { "type": "string" },
          "type": { "type": "string" },
          "aide": { "type": "string" },
          "nom": { "type": "string" }
        },
        "additionalProperties": true
      }
    },
    "exercice_complementaire": {
      "type": "object",
      "properties": {
        "titre": { "type": "string" },
        "consigne": { "type": "string" },
        "versions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": { "type": "string" },
              "description": { "type": "string" }
            },
            "required": ["type", "description"],
            "additionalProperties": false
          }
        }
      },
      "required": ["titre", "consigne", "versions"],
      "additionalProperties": true
    },
    "questions_de_guidage": {
      "type": "array",
      "items": { "type": "string" }
    },
    "feedbacks_attendus": {
      "type": "array",
      "items": { "type": "string" }
    },
    "rappel_final": { "type": "string" },
    "formulation_de_synthese": {
      "type": "object",
      "properties": {
        "proposition": { "type": "string" },
        "texte": { "type": "string" }
      }
    },
    "objectifs": {
      "type": "array",
      "items": { "type": "string" }
    },
    "questions_reflexives": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "question": { "type": "string" }
        },
        "required": ["question"],
        "additionalProperties": true
      }
    },
    "integration_automatique": {
      "type": "object"
    },
    "structure_par_lunette": {
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "champ": { "type": "string" },
            "consigne": { "type": "string" }
          },
          "required": ["champ"],
          "additionalProperties": true
        }
      }
    },
    "mode_demploi": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "etiquette": { "type": "string" },
          "description": { "type": "string" }
        },
        "required": ["etiquette", "description"],
        "additionalProperties": false
      }
    },
    "rituels_cloture_possibles": {
      "type": "array",
      "items": { "type": "string" }
    },
    "conclusion": { "type": "string" },
    "conseil_final": { "type": "string" },
    "note_pedagogique": { "type": "string" },
    "families": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "nom_affiche": { "type": "string" },
          "plage": { "type": "string" },
          "description": { "type": "string" }
        }
      }
    },
    "familles": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "nom": { "type": "string" },
          "lunettes": { "type": "array" }
        }
      }
    },
    "rappel_utilisateur": { "type": "string" },
    "modes_tirage": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "mode": { "type": "string" },
          "intitule": { "type": "string" },
          "description": { "type": "string" }
        },
        "required": ["mode", "intitule", "description"],
        "additionalProperties": false
      }
    },
    "utilisation_des_lunettes": { "type": "string" },
    "structure_donnee_par_lunette": { "type": "object" },
    "intentions": {
      "type": "array",
      "items": { "type": "string" }
    }
  },
  "additionalProperties": true
}

